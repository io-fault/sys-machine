<?xml version="1.0" encoding="utf-8"?>
<!--Transform documentation directory into presentable XHTML-->
<xsl:transform version="1.0"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:exsl="http://exslt.org/common"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:f="https://fault.io/xml/factor"
	xmlns:txt="https://fault.io/xml/text"
	xmlns:Factor="#Factor"
	extension-element-prefixes="exsl"
	exclude-result-prefixes="f xsl exsl Factor">

	<!-- overview of build -->
	<xsl:output
		method="xml" version="1.0" encoding="utf-8"
		omit-xml-declaration="yes"
		indent="no"/>

	<xsl:template match="function">
		<f:function identifier="{@identifier}">
			<xsl:attribute name="xml:id"><xsl:value-of select="@identifier"/></xsl:attribute>
			<f:source unit="line" start="{start/@line}" stop="{stop/@line}"/>
			<f:source unit="octet" start="{start/@offset}" stop="{stop/@offset}"/>
			<xsl:copy-of select="Factor:structure_comment(./comment/node())"/>

			<xsl:for-each select="parameter">
				<f:parameter identifier="{@identifier}">
				</f:parameter>
			</xsl:for-each>
		</f:function>
	</xsl:template>

	<xsl:template match="introspection">
		<f:factor>
			<f:module>
				<xsl:apply-templates select="*"/>
			</f:module>
		</f:factor>
	</xsl:template>

	<xsl:template match="*"></xsl:template>

	<xsl:template match="/">
		<xsl:apply-templates select="/introspection"/>
	</xsl:template>
</xsl:transform>
